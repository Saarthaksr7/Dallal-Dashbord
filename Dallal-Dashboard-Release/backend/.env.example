# Dallal Dashboard - Backend Configuration
# Copy this file to .env and configure with your production values
# SECURITY WARNING: Never commit the .env file to version control!

# ====================
# Application Settings
# ====================
PROJECT_NAME=Dallal Dashboard
API_V1_STR=/api/v1
ENVIRONMENT=production  # development, staging, production

# ====================
# Security - CRITICAL: Change these in production!
# ====================
# Generate with: openssl rand -hex 32
SECRET_KEY=change_this_to_a_secure_random_string_in_production_minimum_32_chars
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=480  # 8 hours (reduced from 8 days for security)

# Refresh Token (recommended for production)
REFRESH_TOKEN_EXPIRE_DAYS=7
REFRESH_SECRET_KEY=change_this_to_another_secure_random_string

# ====================
# Database Configuration
# ====================
# Development (SQLite):
DATABASE_URL=sqlite:///./dallal.db

# Production (PostgreSQL - RECOMMENDED):
# DATABASE_URL=postgresql://username:password@localhost:5432/dallal_db

# Production (MySQL):
# DATABASE_URL=mysql://username:password@localhost:3306/dallal_db
 
# Database Pool Settings (for production databases)
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# ====================
# CORS Configuration
# ====================
# Comma-separated list of allowed origins (update with your frontend URLs)
BACKEND_CORS_ORIGINS=["http://localhost:5173","http://localhost:3000","https://yourdomain.com"]

# ====================
# Redis (Optional - for caching and session storage)
# ====================
REDIS_URL=redis://localhost:6379/0
REDIS_ENABLED=false  # Set to true if using Redis

# ====================
# Rate Limiting
# ====================
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_ENABLED=true

# ====================
# Logging
# ====================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # text or json (json recommended for production)
LOG_FILE_PATH=./logs/app.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ====================
# Email/SMTP (for notifications)
# ====================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@example.com
SMTP_PASSWORD=your-app-specific-password
SMTP_FROM_EMAIL=noreply@yourdomain.com
SMTP_FROM_NAME=Dallal Dashboard
EMAIL_ENABLED=false

# ====================
# Monitoring & Alerting
# ====================
ALERT_EMAIL_RECIPIENTS=admin@yourdomain.com
WEBHOOK_URL=  # Optional: Slack/Discord webhook
SENTRY_DSN=  # Optional: Sentry error tracking

# ====================
# SSH Configuration
# ====================
SSH_KEY_PATH=./keys
SSH_CONNECTION_TIMEOUT=30
MAX_SSH_SESSIONS=10

# ====================
# Docker Configuration
# ====================
DOCKER_HOST=unix:///var/run/docker.sock
# For remote: DOCKER_HOST=tcp://remote-host:2375

# ====================
# Service Discovery
# ====================
MDNS_ENABLED=true
DISCOVERY_INTERVAL_SECONDS=300  # 5 minutes

# ====================
# Security Policies
# ====================
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15
SESSION_TIMEOUT_MINUTES=60
PASSWORD_MIN_LENGTH=8
REQUIRE_STRONG_PASSWORD=true

# ====================
# File Uploads
# ====================
MAX_UPLOAD_SIZE_MB=100
ALLOWED_UPLOAD_EXTENSIONS=.zip,.tar,.gz,.json

# ====================
# Backup Configuration
# ====================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM (cron format)
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ====================
# SNMP Configuration
# ====================
SNMP_TRAP_PORT=162
SNMP_COMMUNITY=public

# ====================
# Production Server (Gunicorn)
# ====================
WORKER_PROCESSES=4  # Adjust based on CPU cores
GUNICORN_BIND=0.0.0.0:8000
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker

# ====================
# Optional: Master Key for Credential Vault  
# ====================
# Overrides secret.key file if set
# DALLAL_SECRET_KEY=your_fernet_key_here
